<div class="tab-pane" ng-show='vm.uuid'>

    <div class="row-fluid">
        <div class="span8">
            <h3>Machine {{vm._name}}
                <span style='font-size: 0.5em; padding: 5px 10px 10px 8px; margin-left: 10px; height: 10px;' class='label label-{{vm._state_label}}'>{{vm.state}}</span>
            </h3>
        </div>
        <div class='span4'>
            <div class="btn-toolbar btn-group pull-right">
                <div class="btn-group" style="margin-right: 30px;">
                    <button
                        ng-click='vnc(vm)'
                        ng-show="vm.config && (vm.config.type == 'kvm') && vm.state=='running'"
                        title='vnc'
                        jq-run='tooltip'
                        class="btn">
                        <i class='icon-eye-open'></i>
                    </button>
                </div>

                <div class="btn-group">
                    <button ng-click="action('start', vm)"  ng-disabled="vm.state!='stopped'" class="btn btn-success">
                        <i class='icon-play'></i>
                    </button>
                    <button ng-click="action('reboot', vm)" ng-disabled="vm.state!='running'" class="btn">
                        <i class='icon-refresh'></i>
                    </button>
                    <button ng-click="action('stop', vm)"   ng-disabled="vm.state!='running'" class="btn btn-warning">
                        <i class='icon-stop'></i>
                    </button>
                </div>
            </div>
        </div>
    </div>
    <hr/>

<span ng-hide='vm.config'>
    <p>Something is wrong with this machine.</p>
    <p>UUID: {{vm.uuid}}</p>
    <p><button ng-click="action('delete', vm)" class="btn"><i class='icon-trash'></i> Destroy</button><br/></p>
    <p>
        <strong>History</strong>
        <table class="table">
            <tr ng-repeat="log in vm.log | orderBy: '-date' ">
                <td>{{log.log}}</td>
                <td class='nowrap light' title="{{log.date/1000 | date:'medium'}}" jq-run='tooltip'>{{log.date/1000 | fromNow}}</td>
            </tr>
        </table>
    </p>
</span>

<div class="tabbable tabs-right" ng-show='vm.config'>
  <ul class="nav nav-tabs">
    <li class="active"><a href="#details" data-toggle="tab">Details</a></li>
    <li><a href="#history" data-toggle="tab">History</a></li>
    <li><a href="#snapshots" data-toggle="tab">Snapshots</a></li>
    <!-- <li><a href="#tab2" data-toggle="tab">Notes</a></li>
    <li><a href="#tab2" data-toggle="tab">Performance</a></li>
    -->
  </ul>
  <div class="tab-content">
    <div class="tab-pane active" id="details">
            <table class='table table-bordered'>
                <tr><th>Name</th><td><b>{{vm.config.alias}}</b> / <span class="uuid">{{vm.uuid}}</span></td></tr>
                <tr><th>Created</th><td>{{vm.config.created_at | fromNow}} ({{vm.config.created_at | date:'medium'}})</td></tr>
                <tr><th>Dataset</th>
                    <td>
                        <img ng-src="images/logos/{{vm.config._dataset.os || 'unknown'}}.png" class=oslogo>
                        <span ng-show='vm.config._dataset'>
                            {{vm.config._dataset.name}} ({{vm.config._dataset.version}})<br/>
                            {{vm.config._dataset.description}}<br/>
                        </span>
                        <span class='light'>{{vm.config.dataset}}</span>
                    </td>
                </tr>
                <tr><th>Resources</th>
                    <td>
                        <dl class="dl-horizontal">
                            <dt>Package</dt><dd><strong>{{vm._package}}</strong></dd>
                            <dt>Ram</dt><dd>{{vm.config.ram * 1024*1024 | bytes}}</dd>
                            <dt>CPU</dt>
                                <dd ng-show='vm.config.vcpus'>{{vm.config.vcpus}}</dd>
                                <dd ng-hide='vm.config.vcpus'>Share: {{vm.config.cpu_shares}} {{vm.config.cpu_cap && 'Cap: ' + vm.config.cpu_cap}}</dd>
                            <dt>Disk</dt><dd>{{vm.config.quota * 1024*1024*1024 | bytes}}</dd>
                            <dt></dt><dd></dd>
                            <dt></dt><dd></dd>
                        </dl>
                    </td></tr>
                <tr><th>Network</th>
                    <td>
                        <dl ng-repeat='net in vm.config.networks' class="dl-horizontal span3">
                            <dt>Tag</dt>        <dd><strong>{{net.nic_tag}}</strong></dd>
                            <dt>Interface</dt>  <dd>{{net.interface}}</dd>
                            <dt>IP</dt>         <dd>{{net.ip}}</dd>
                            <dt>Mask</dt>       <dd>{{net.netmask}}</dd>
                            <dt>Gateway</dt>    <dd>{{net.gateway}}</dd>
                            <dt>Mac</dt>        <dd>{{net.mac}}</dd>
                            <dt ng-show='net.model'>Model</dt>      <dd ng-show='net.model'>{{net.model}}</dd>
                            <dt>Primary</dt>    <dd><input type='checkbox' ng-checked='net.primary' disabled></dd>
                        </dl>
                    </td>
                </tr>
                <tr><th>Type</th><td>{{vm.config.type}}</td></tr>
                <tr><th>Hypervisor</th><td>{{vm.hypervisor}} </td></tr>
            </table>
            <div class="btn-toolbar btn-group pull-right">
                <!--
                <button class="btn" jq-run='tooltip' title='Move to other hypervisor'><i class='icon-forward'></i> Move</button>
                -->
                <button ng-click="snapshot('create')" class="btn" jq-run='tooltip' title='Take a new snapshot'><i class='icon-camera'></i> Snapshot</button>
                <button ng-click="action('delete', vm)" class="btn"><i class='icon-trash'></i> Destroy</button>
            </div>
        </div>
    <div class="tab-pane" id="history">
        <table class="table">
            <tr ng-repeat="log in vm.log | orderBy: '-date' ">
                <td>{{log.log}}</td>
                <td class='nowrap light' title="{{log.date/1000 | date:'medium'}}" jq-run='tooltip'>{{log.date/1000 | fromNow}}</td>
            </tr>
        </table>
    </div>
    <div class="tab-pane" id="snapshots">
        <button style='margin-bottom: 10px' ng-click="snapshot('create')" class="btn pull-right" jq-run='tooltip' title='Take a new snapshot'><i class='icon-camera'></i> Snapshot</button>
        <table class="table">
            <tr ng-repeat="snap in snapshots | hash2array | orderBy: '-timestamp' ">
                <td><strong>{{snap.comment}}</strong></td>
                <td class='nowrap'>{{snap.timestamp/1000 | date:'medium'}}</td>
                <td class='nowrap light'>{{snap.timestamp/1000 | fromNow}}</td>
                <td class='nowrap'>
                    <i ng-click="snapshot('rollback', snap)" jq-run="tooltip" title="rollback"
                       class="icon-backward clickable"></i>
                    <i ng-click="snapshot('delete', snap)" jq-run="tooltip" title="delete"
                       class="icon-trash clickable"></i>
                </td>
            </tr>
        </table>
    </div>
  </div>
</div>

    <div class="row-fluid">
        <div class="span12">
        </div>
</div>
